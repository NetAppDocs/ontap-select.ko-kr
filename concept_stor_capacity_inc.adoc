---
sidebar: sidebar 
permalink: concept_stor_capacity_inc.html 
keywords: ontap select, deploy, increase storage 
summary: ONTAP Deploy를 사용하여 ONTAP Select 클러스터의 각 노드에 대해 추가 스토리지를 추가하고 라이센스를 부여할 수 있습니다. 
---
= 스토리지 용량 증가
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ONTAP Deploy를 사용하여 ONTAP Select 클러스터의 각 노드에 대해 추가 스토리지를 추가하고 라이센스를 부여할 수 있습니다.

ONTAP 구축 시 스토리지 추가 기능이 관리 중인 스토리지를 늘리는 유일한 방법이며 ONTAP Select VM을 직접 수정하는 것은 지원되지 않습니다. 다음 그림에서는 스토리지 추가 마법사를 시작하는 “+” 아이콘을 보여 줍니다.

image:ST_05.jpg["클러스터 및 노드 세부 정보"]

용량 확장 작업을 성공적으로 수행하려면 다음 사항을 고려해야 합니다. 용량을 추가하려면 기존 라이센스에 총 공간 크기(기존 라이센스와 새 용량)를 추가해야 합니다. 라이센스가 부여된 용량을 초과하는 노드가 발생하는 스토리지 추가 작업이 실패합니다. 용량이 충분한 새 라이센스를 먼저 설치해야 합니다.

기존 ONTAP Select Aggregate에 추가 용량이 추가되면 새 스토리지 풀(데이터 저장소)에 기존 스토리지 풀(데이터 저장소)과 유사한 성능 프로필이 있어야 합니다. AFF와 같은 특성(플래시 사용)이 설치된 ONTAP Select 노드에는 비 SSD 스토리지를 추가할 수 없습니다. DAS와 외부 스토리지의 혼합도 지원되지 않습니다.

DAS(Local Storage Pool)를 추가하기 위해 시스템에 로컬로 연결된 스토리지를 추가하는 경우 추가 RAID 그룹 및 LUN을 구축해야 합니다. FAS 시스템과 마찬가지로, 새 RAID 그룹 성능이 동일한 애그리게이트에 새 공간을 추가할 경우 원래 RAID 그룹의 성능과 유사한지 확인해야 합니다. 새로운 애그리게이트를 만들 경우, 새 애그리게이트의 성능이 잘 이해된다면 새로운 RAID 그룹 레이아웃이 달라질 수 있습니다.

데이터 저장소의 총 크기가 ESX에서 지원하는 최대 데이터 저장소 크기를 초과하지 않는 경우 새 공간을 익스텐트에 해당 데이터 저장소에 추가할 수 있습니다. ONTAP Select가 이미 설치된 데이터 저장소에 데이터 저장소 익스텐트를 추가하는 작업은 동적으로 수행할 수 있으며 ONTAP Select 노드의 작업에는 영향을 미치지 않습니다.

ONTAP Select 노드가 HA 쌍의 일부인 경우 몇 가지 추가 문제를 고려해야 합니다.

HA 2노드에서 각 노드에는 파트너의 데이터 미러 복사본이 포함되어 있습니다. 노드 1에 공간을 추가하려면 노드 1의 모든 데이터가 노드 2에 복제되도록 동일한 양의 공간을 파트너 노드 2에 추가해야 합니다. 즉, 노드 1의 용량 추가 작업의 일부로 노드 2에 추가된 공간이 노드 2에서 표시되거나 액세스할 수 없습니다. 공간이 노드 2에 추가되어 HA 이벤트 중에 노드 1 데이터가 완전히 보호됩니다.

성능과 관련하여 추가적으로 고려해야 할 사항이 있습니다. 노드 1의 데이터는 노드 2에 동기식으로 복제됩니다. 따라서 노드 1의 새 공간(데이터 저장소)의 성능이 노드 2의 새 공간(데이터 저장소)의 성능과 일치해야 합니다. 다시 말해, 두 노드에 공간을 추가하지만 다른 드라이브 기술 또는 다른 RAID 그룹 크기를 사용하면 성능 문제가 발생할 수 있습니다. 이는 파트너 노드에서 데이터 복사본을 유지 관리하는 데 사용되는 RAID SyncMirror 작업 때문입니다.

HA Pair의 두 노드에서 사용자 액세스 가능한 용량을 늘리려면 각 노드에 대해 하나씩 두 개의 스토리지 추가 작업을 수행해야 합니다. 스토리지를 추가할 때마다 두 노드 모두에 공간이 추가로 필요합니다. 각 노드에 필요한 총 공간은 노드 1에 필요한 공간과 노드 2에 필요한 공간과 같습니다.

초기 설정은 2개 노드로 구성되며, 각 노드에는 각 데이터 저장소에 30TB 공간이 있는 2개의 데이터 저장소가 있습니다. ONTAP Deploy는 2노드 클러스터를 생성하며, 각 노드가 데이터 저장소 1에서 10TB의 공간을 소비합니다. ONTAP Deploy는 각 노드를 노드당 5TB의 활성 공간으로 구성합니다.

다음 그림에서는 노드 1에 대한 단일 스토리지 추가 작업의 결과를 보여 줍니다. ONTAP Select에서는 여전히 각 노드에서 동일한 양의 스토리지(15TB)를 사용합니다. 하지만 노드 1의 경우 노드 2(5TB)보다 액티브 스토리지(10TB)가 더 많습니다. 두 노드는 각 노드가 다른 노드의 데이터 복사본을 호스팅하므로 완전히 보호됩니다. 데이터 저장소 1에 여유 공간이 더 남아 있고 데이터 저장소 2는 여전히 완전히 사용 가능합니다.

* 용량 분산: 단일 스토리지 추가 작업 후 할당 및 여유 공간 *

image:ST_06.jpg["용량 배포: 단일 스토리지 추가 작업 후 할당 및 여유 공간"]

노드 1에 대한 두 가지 추가 스토리지 작업은 나머지 데이터 저장소 1과 데이터 저장소 2의 일부를 사용합니다(용량 한도 사용). 첫 번째 스토리지 추가 작업에서는 데이터 저장소 1에 남아 있는 15TB의 여유 공간을 사용합니다. 다음 그림에서는 두 번째 스토리지 추가 작업의 결과를 보여 줍니다. 현재 노드 1에 50TB의 활성 데이터가 관리 중인 반면 노드 2에는 원래 5TB가 있습니다.

* 용량 배포: 노드 1에 대한 두 가지 추가 스토리지 추가 작업 후 할당 및 여유 공간 *

image:ST_07.jpg["용량 배포: 노드 1에 대한 두 가지 추가 스토리지 추가 작업 후 할당 및 여유 공간"]

용량 추가 작업 중에 사용되는 최대 VMDK 크기는 16TB입니다. 클러스터 생성 작업 중에 사용되는 최대 VMDK 크기는 8TB입니다. ONTAP 구축 시 구성(단일 노드 또는 다중 노드 클러스터)과 추가 용량에 따라 크기가 올바르게 조정된 VMDK를 생성합니다. 그러나 클러스터 생성 작업 중에는 각 VMDK의 최대 크기가 8TB를 초과하지 않고, 스토리지 추가 작업 중에는 16TB를 초과하지 않아야 합니다.



== 소프트웨어 RAID로 ONTAP Select의 용량을 늘립니다

마찬가지로 스토리지 추가 마법사를 사용하여 소프트웨어 RAID를 사용하는 ONTAP Select 노드의 관리 용량을 늘릴 수 있습니다. 마법사는 사용 가능하고 ONTAP Select VM에 RDM으로 매핑할 수 있는 DAS SDD 드라이브만 표시합니다.

용량 라이센스를 1TB까지 늘릴 수 있지만 소프트웨어 RAID로 작업할 때는 용량을 단일 TB로 물리적으로 늘릴 수 없습니다. FAS 또는 AFF 스토리지에 디스크를 추가하는 것과 마찬가지로, 특정 요소에 따라 단일 작업에서 추가할 수 있는 최소 스토리지 양이 결정됩니다.

HA 쌍에서 노드 1에 스토리지를 추가하려면 노드의 HA 쌍(노드 2)에서도 동일한 수의 드라이브를 사용할 수 있어야 합니다. 로컬 드라이브와 원격 디스크는 모두 노드 1에서 한 스토리지 추가 작업에 사용됩니다. 즉, 원격 드라이브는 노드 1의 새 스토리지가 노드 2에서 복제되고 보호되도록 하는 데 사용됩니다. 노드 2에서 로컬에서 사용할 수 있는 스토리지를 추가하려면 별도의 스토리지 추가 작업과 두 노드에서 같은 수의 드라이브를 사용할 수 있어야 합니다.

ONTAP Select는 새 드라이브를 기존 드라이브와 동일한 루트, 데이터 및 데이터 파티션으로 분할합니다. 파티셔닝 작업은 새 애그리게이트를 생성하거나 기존 애그리게이트를 확장하는 동안 수행됩니다. 각 디스크의 루트 파티션 스트라이프 크기는 기존 디스크의 기존 루트 파티션 크기와 일치하도록 설정됩니다. 따라서 두 개의 동일한 데이터 파티션 크기 중 각 크기는 디스크 총 용량에서 루트 파티션 크기를 2로 나눈 값으로 계산할 수 있습니다. 루트 파티션 스트라이프 크기는 가변적이며, 초기 클러스터 설정 중에 다음과 같이 계산됩니다. 필요한 총 루트 공간(단일 노드 클러스터의 경우 68GB, HA 쌍의 경우 136GB)은 초기 디스크 수에서 스페어 및 패리티 드라이브를 뺀 값으로 나뉩니다. 루트 파티션 스트라이프 크기는 시스템에 추가되는 모든 드라이브에서 일정하게 유지됩니다.

새 Aggregate를 생성하는 경우 필요한 최소 드라이브 수는 RAID 유형 및 ONTAP Select 노드가 HA 쌍의 일부인지 여부에 따라 달라집니다.

기존 Aggregate에 스토리지를 추가할 경우 몇 가지 추가 고려사항이 필요합니다. RAID 그룹이 이미 최대 한계에 도달하지 않은 경우 기존 RAID 그룹에 드라이브를 추가할 수 있습니다. 기존 RAID 그룹에 스핀들을 추가하는 기존 FAS 및 AFF 모범 사례도 여기에 적용되며, 새 스핀들에 핫 스팟을 생성하는 것도 잠재적인 문제입니다. 또한 데이터 파티션 크기가 같거나 더 큰 드라이브만 기존 RAID 그룹에 추가할 수 있습니다. 위에서 설명한 것처럼 데이터 파티션 크기는 드라이브 원시 크기와 다릅니다. 추가되는 데이터 파티션이 기존 파티션보다 큰 경우 새 드라이브의 크기가 올바른 것입니다. 다시 말해, 새 드라이브 용량의 일부가 사용되지 않은 채로 있습니다.

새 드라이브를 사용하여 기존 애그리게이트의 일부로 새 RAID 그룹을 생성할 수도 있습니다. 이 경우 RAID 그룹 크기는 기존 RAID 그룹 크기와 일치해야 합니다.
