---
sidebar: sidebar 
permalink: task_chk_nvme_configure.html 
keywords: ontap select, nvme storage, host preparation 
summary: 소프트웨어 RAID와 함께 NVMe 드라이브를 사용하려는 경우 드라이브를 인식하도록 호스트를 구성해야 합니다. 
---
= ONTAP Select 호스트가 NVMe 드라이브를 사용하도록 구성합니다
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NVMe 드라이브를 소프트웨어 RAID와 함께 사용하려면 ESXi 또는 KVM 호스트가 드라이브를 인식하도록 구성해야 합니다.

NVMe 장치에서 VMDirectPath I/O Pass-Through를 사용하여 데이터 효율성을 극대화합니다. 이 설정은 드라이브를 ONTAP Select 가상 시스템에 노출시켜 ONTAP가 장치에 PCI를 직접 액세스할 수 있도록 합니다.



== 1단계: 호스트 구성

ESXi 또는 KVM 호스트가 드라이브를 인식하도록 구성합니다.

.시작하기 전에
배포 환경이 다음 최소 요구 사항을 충족하는지 확인합니다.

* ESX 호스트의 경우 지원되는 Deploy 관리 유틸리티가 있는 ONTAP Select 9.7 이상
* KVM 호스트의 경우 지원되는 Deploy 관리 유틸리티가 있는 ONTAP Select 9.17.1 이상
* Premium XL 플랫폼 라이센스 제공 또는 90일 평가판 라이센스
* ESXi 또는 KVM 호스트가 지원되는 하이퍼바이저 버전을 실행 중입니다.
+
[role="tabbed-block"]
====
.ESXi
--
ESXi는 다음 하이퍼바이저 버전에서 지원됩니다.

** VMware ESXi 9.0
** VMware ESXi 8.0 U3
** VMware ESXi 8.0 U2
** VMware ESXi 8.0 U1(빌드 21495797)
** VMware ESXi 8.0 GA(빌드 20513097)


--
.KVM
--
KVM은 다음 하이퍼바이저 버전에서 지원됩니다.

** Red Hat Enterprise Linux (RHEL) 10.1, 10.0, 9.7, 9.6, 9.5, 9.4, 9.2, 9.1, 9.0, 8.8, 8.7 및 8.6
** Rocky Linux 10.0, 9.6, 9.5, 9.4, 9.3, 9.2, 9.1, 9.0, 8.9, 8.8, 8.7 및 8.6


[NOTE]
====
RHEL 10.1 및 10.0과 Rocky Linux 10.0 호스트의 KVM 하이퍼바이저에 대한 소프트웨어 RAID 워크플로 제한 사항이 있습니다. 자세한 내용은 다음 기술 자료 문서를 참조하십시오:

** link:https://kb.netapp.com/on-prem/ontap/ontap-select/Select-Issues/CDEPLOY-4020["CDEPLOY-4020: ONTAP Select Deploy: RHEL 10 및 ROCKY 10을 사용하여 클러스터 HWR을 생성하는 동안 경고 메시지가 표시됩니다."^]
** link:https://kb.netapp.com/on-prem/ontap/ontap-select/Select-Issues/CDEPLOY-4025["CDEPLOY-4025: ONTAP Select DeployGUI: RHEL10/Rocky 10이 설치된 호스트의 클러스터 생성 페이지에서 SWR에 스토리지 풀 및 스토리지 디스크가 표시되지 않음"^]


====
--
====
* 사양 1.0 이상을 준수하는 NVMe 장치


를 따르세요 link:kvm-host-configuration-and-preparation-checklist["호스트 준비 체크리스트"] , 그리고 필요한 정보를 검토하세요. link:reference_chk_deploy_req_info.html["배포 유틸리티 설치"] 그리고 link:reference_chk_select_req_info.html["ONTAP Select 설치"] 자세한 내용은.

.이 작업에 대해
새 ONTAP Select 클러스터를 생성하기 전에 이 절차를 수행해야 합니다. 기존 소프트웨어 RAID NVMe 클러스터에 추가 NVMe 드라이브를 구성하는 절차도 수행할 수 있습니다. 이 경우, 드라이브를 구성한 후 SSD 드라이브를 추가할 때처럼 Deploy를 통해 드라이브를 추가해야 합니다. 가장 큰 차이점은 Deploy가 NVMe 드라이브를 감지하고 노드를 재부팅한다는 것입니다. 기존 클러스터에 NVMe 드라이브를 추가할 때는 재부팅 프로세스에 대해 다음 사항에 유의하십시오.

* Deploy가 재부팅 오케스트레이션을 처리합니다.
* HA 테이크오버 및 반환은 질서정연하게 수행되지만 애그리게이트를 재동기화하는 데 시간이 걸릴 수 있습니다.
* 단일 노드 클러스터에서는 다운타임이 발생합니다.


을 참조하십시오 link:concept_stor_capacity_inc.html["스토리지 용량 증가"] 자세한 내용은 를 참조하십시오.

.단계
. I/O 가상화 지원을 활성화하려면 호스트의 * BIOS 구성 * 메뉴에 액세스하십시오.
. *Intel VT for Directed I/O(VT-d)* 설정을 활성화합니다.
+
image:nvme_01.png["소켓 구성"]

. 일부 서버는 *Intel Volume Management Device(Intel VMD)*를 지원합니다. 이 기능을 활성화하면 사용 가능한 NVMe 장치가 ESXi 또는 KVM 하이퍼바이저에서 표시되지 않습니다. 진행하기 전에 이 옵션을 비활성화하십시오.
+
image:nvme_07.png["소켓 구성, VMD"]

. 가상 머신에 대한 패스스루(pass-through)를 위해 NVMe 드라이브를 구성합니다.
+
.. vSphere에서 호스트 *구성* 보기를 열고 *하드웨어: PCI 장치*에서 *편집*을 선택합니다.
.. ONTAP Select에 사용할 NVMe 드라이브를 선택합니다.
+
다음 예제 출력은 ESXi 호스트에 사용 가능한 드라이브를 보여줍니다.

+
image:nvme_02.png["PCI 장치 가용성을 편집합니다"]

+

NOTE: ONTAP Select VM 시스템 디스크와 가상 NVRAM을 호스팅하려면 NVMe 디바이스에서 지원하는 VMFS 데이터 저장소가 필요합니다. PCI 패스스스루(pass-through)를 위해 다른 NVMe 드라이브를 구성할 때는 이 목적으로 하나 이상의 NVMe 드라이브를 사용할 수 있는 상태로 두십시오.

.. *확인*을 선택하세요. 선택된 기기는 *사용 가능(보류 중)*으로 표시됩니다.


. *이 호스트 재부팅*을 선택하세요.
+
다음 예제 출력은 ESXi 호스트에 대한 것입니다.

+
image:nvme_03.png["이 호스트를 재부팅합니다"]





== 2단계: ONTAP Select Deploy 유틸리티 설치

호스트가 준비되면 ONTAP Select Deploy 유틸리티를 설치할 수 있습니다. Deploy는 새로 준비된 호스트에 ONTAP Select 스토리지 클러스터를 생성하는 과정을 안내합니다. 이 과정에서 Deploy는 패스스루로 구성된 NVMe 드라이브를 감지하고 ONTAP 데이터 디스크로 사용할 드라이브를 자동으로 선택합니다. 필요한 경우 기본 선택을 조정할 수 있습니다.


NOTE: 각 ONTAP Select 노드마다 최대 14개의 NVMe 장치가 지원됩니다.

다음 예제 출력은 ESXi 호스트에 대한 것입니다.

image:nvme_04.png["ONTAP Select 클러스터 구축"]

클러스터가 성공적으로 배포되면 ONTAP System Manager를 통해 모범 사례에 따라 스토리지를 프로비저닝할 수 있습니다. ONTAP NVMe 스토리지를 최대한 활용할 수 있는 플래시 최적화된 스토리지 효율성 기능을 자동으로 활성화합니다.

image:nvme_05.png["로컬 스토리지 준비 중"]

image:nvme_06.png["ONTAP 시스템 관리자"]
